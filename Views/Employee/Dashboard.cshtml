@model List<EAPD7111_Agri_Energy_Connect.Models.FarmerModel>

@{
    ViewData["Title"] = "Employee Dashboard";
}

<style>
    body {
        background-color: #f5f8f4;
        background-image: url('https://assets.venuecrew.com/wp-content/uploads/2024/08/26230728/barbican-conservatory.jpg');
    }

    .navbar {
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        background-color: var(--dark-green);
        color: white;
        padding: 8px 20px;
        border-radius: 20px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        font-size: 0.95rem;
    }

        .navbar a {
            color: #88b04b;
            text-decoration: none;
            margin: 0 10px;
        }

            .navbar a:hover {
                text-decoration: underline;
            }

    .dashboard-container {
        background-color: #e3ede1; 
        padding: 2rem;
        border-radius: 8px;
    }

    .dashboard-header {
        color: #2f4f2f; 
        font-weight: bold;
        margin-bottom: 1.5rem;
    }

    .btn-primary {
        background-color: #2f4f2f;
        border-color: #2f4f2f;
    }

        .btn-primary:hover {
            background-color: #1e351e;
            border-color: #1e351e;
        }

    .btn-success {
        background-color: #3b6b3b;
        border-color: #3b6b3b;
    }

        .btn-success:hover {
            background-color: #2c502c;
            border-color: #2c502c;
        }

    .table thead {
        background-color: #cfdacb;
        color: #2f4f2f;
    }

    .form-label {
        color: #2f4f2f;
        font-weight: 500;
    }

    .href-section {
        background-color: #e3ede1;
        padding: 1rem;
        border-radius: 6px;
        margin-bottom: 2rem;
    }
</style>

<div class="dashboard-container">

    <h2 class="dashboard-header">Employee Dashboard</h2>

    
    <div class="mb-3">
        <a asp-action="CreateFarmer" asp-controller="Employee" class="btn btn-success">
            Add New Farmer
        </a>
    </div>

    
    <div class="href-section">
        <form method="get" asp-action="FarmerProducts" asp-controller="Employee" class="row g-2 align-items-end">
            <div class="col-md-4">
                <label class="form-label" for="farmerSelect">Select Farmer</label>
                <select class="form-select" name="id" id="farmerSelect" required>
                    <option value="">-- Choose a farmer --</option>
                    @foreach (var farmer in Model)
                    {
                        <option value="@farmer.FarmerId">@farmer.FullName</option>
                    }
                </select>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary">View Products</button>
            </div>
        </form>
    </div>

    
    @if (!Model.Any())
    {
        <p class="text-muted">No farmers available in the system.</p>
    }
    else
    {
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Farmer Name</th>
                    <th>Email</th>
                    <th>Location</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var farmer in Model)
                {
                    <tr>
                        <td>@farmer.FullName</td>
                        <td>@farmer.Email</td>
                        <td>@farmer.Address</td>
                        <td>
                            <a asp-action="FarmerProducts" asp-controller="Employee" asp-route-id="@farmer.FarmerId" class="btn btn-sm btn-primary">
                                View Products
                            </a>

                            <a asp-action="EditFarmer" asp-controller="Employee" asp-route-id="@farmer.FarmerId" class="btn btn-sm btn-warning">
                                Edit
                            </a>

                            <form method="post" asp-action="DeleteFarmer" asp-controller="Employee" asp-route-id="@farmer.FarmerId"
                                  onsubmit="return confirm('Are you sure you want to delete this farmer?');" style="display:inline;">
                                <button type="submit" class="btn btn-sm btn-danger">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }

</div>
